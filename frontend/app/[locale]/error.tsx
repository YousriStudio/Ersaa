'use client';

import { useEffect } from 'react';
import { useLocale, useTranslations } from 'next-intl';
import Link from 'next/link';
import { usePageLoad } from '@/lib/use-animations';
import { ScrollAnimations } from '@/components/scroll-animations';

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  const locale = useLocale();
  const t = useTranslations();
  const isLoaded = usePageLoad(100);

  useEffect(() => {
    console.error(error);
  }, [error]);

  return (
    <>
      <ScrollAnimations />
      <div className={`min-h-screen relative page-enter ${isLoaded ? 'loaded' : ''}`}>
        {/* Background that extends to top */}
        <div className="absolute inset-0 hero-background" style={{top: '-5rem'}}></div>
        
        {/* Main Content */}
        <div className="relative mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-8 md:py-16 flex items-center justify-center min-h-screen">
          <div className="text-center">
            {/* Server Error Illustration */}
            <div className={`mx-auto mb-8 w-80 h-72 flex items-center justify-center ${isLoaded ? 'animate-bounce-in' : 'opacity-0'}`}>
              <svg width="338" height="296" viewBox="0 0 338 296" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
                <path d="M23.339 143.464C20.0592 144.191 16.6453 144.042 13.4417 143.037C10.2367 142.031 7.35254 140.202 5.0761 137.73C2.79965 135.259 1.21346 132.235 0.471786 128.958C-0.26833 125.681 -0.135883 122.269 0.856652 119.059L33.6633 13.5047C34.6433 10.2793 36.4648 7.37341 38.9391 5.08451C41.4135 2.7956 44.4518 1.2063 47.7442 0.478647C51.0194 -0.270818 54.4364 -0.138381 57.6446 0.863503C60.8528 1.86383 63.7369 3.69776 66.0056 6.17987L141.013 87.3511C143.286 89.8239 144.871 92.8498 145.606 96.1266C146.342 99.4034 146.203 102.817 145.206 106.024C144.207 109.231 142.384 112.119 139.917 114.4C137.453 116.68 134.43 118.272 131.155 119.017L23.4045 143.464H23.3422H23.339ZM49.0515 6.05522C46.7423 6.55695 44.6092 7.66946 42.8719 9.27279C41.1346 10.8761 39.8584 12.9141 39.1713 15.175L6.36467 120.73C5.6713 122.981 5.57937 125.374 6.09979 127.671C6.6202 129.968 7.73428 132.088 9.32981 133.821C10.9253 135.554 12.9478 136.838 15.1947 137.545C17.4415 138.252 19.8348 138.357 22.1346 137.85L129.947 113.489C132.251 112.97 134.38 111.854 136.116 110.253C137.853 108.651 139.137 106.619 139.838 104.364C140.539 102.108 140.636 99.7087 140.114 97.4027C139.593 95.0982 138.475 92.9729 136.87 91.2371L61.8625 10.0456C60.2732 8.30206 58.2492 7.01348 55.9961 6.31232C53.7446 5.61116 51.345 5.52234 49.0483 6.05678L49.0515 6.05522Z" fill="#292561"/>
                <path d="M62.7941 102.932C62.5915 102.007 62.5775 101.048 62.7535 100.117C62.9296 99.1848 63.2911 98.2997 63.8178 97.5113C64.3444 96.7229 65.0238 96.0498 65.8153 95.5294C66.6084 95.009 67.4965 94.6553 68.4299 94.487C69.3414 94.2423 70.2918 94.1847 71.2267 94.3171C72.16 94.4496 73.0591 94.7706 73.8646 95.2598C74.6718 95.7491 75.3714 96.3973 75.9214 97.1639C76.4714 97.9305 76.861 98.8015 77.0651 99.7223C77.2848 100.645 77.3191 101.603 77.1632 102.538C77.0059 103.473 76.6646 104.367 76.1567 105.17C75.6487 105.97 74.9849 106.662 74.2059 107.203C73.4268 107.744 72.5465 108.122 71.6178 108.315C70.6845 108.563 69.7106 108.619 68.7555 108.481C67.7988 108.342 66.8826 108.01 66.0568 107.508C65.2326 107.005 64.5189 106.34 63.9564 105.553C63.3955 104.768 62.9997 103.875 62.7925 102.932H62.7941ZM50.4863 46.6708L63.6807 43.6309L71.0693 85.8533L62.2441 87.9646L50.4863 46.6724V46.6708Z" fill="#292561"/>
                <path d="M318.01 121.678H191.781V295.842H318.01V121.678Z" fill="#BFEDE7"/>
                <path d="M335.715 76.9375H174.273C173.352 76.9375 172.604 77.6846 172.604 78.6063V120.643C172.604 121.565 173.352 122.312 174.273 122.312H335.715C336.637 122.312 337.384 121.565 337.384 120.643V78.6063C337.384 77.6846 336.637 76.9375 335.715 76.9375Z" fill="#292561"/>
                <path d="M198.875 116.02C198.875 115.098 199.621 114.352 200.544 114.352H263.276C264.197 114.352 264.945 115.098 264.945 116.02V122.312H198.875V116.02Z" fill="white"/>
                <path d="M308.309 93.6543H278.099C277.868 93.6543 277.681 93.8413 277.681 94.0719V98.0124C277.681 98.243 277.868 98.43 278.099 98.43H308.309C308.54 98.43 308.727 98.243 308.727 98.0124V94.0719C308.727 93.8413 308.54 93.6543 308.309 93.6543Z" fill="white"/>
                <path d="M181.36 88.0839C182.679 88.0839 183.748 87.0145 183.748 85.6953C183.748 84.3761 182.679 83.3066 181.36 83.3066C180.041 83.3066 178.971 84.3761 178.971 85.6953C178.971 87.0145 180.041 88.0839 181.36 88.0839Z" fill="#F74930"/>
                <path d="M197.281 88.0839C198.6 88.0839 199.67 87.0145 199.67 85.6953C199.67 84.3761 198.6 83.3066 197.281 83.3066C195.962 83.3066 194.893 84.3761 194.893 85.6953C194.893 87.0145 195.962 88.0839 197.281 88.0839Z" fill="#00A76F"/>
                <path d="M189.32 88.0839C190.639 88.0839 191.709 87.0145 191.709 85.6953C191.709 84.3761 190.639 83.3066 189.32 83.3066C188.001 83.3066 186.932 84.3761 186.932 85.6953C186.932 87.0145 188.001 88.0839 189.32 88.0839Z" fill="#FFDF00"/>
                <path d="M318.28 102.412C321.797 102.412 324.648 99.5609 324.648 96.0439C324.648 92.5269 321.797 89.6758 318.28 89.6758C314.763 89.6758 311.912 92.5269 311.912 96.0439C311.912 99.5609 314.763 102.412 318.28 102.412Z" fill="white"/>
                <path d="M335.715 131.875H174.273C173.352 131.875 172.604 132.622 172.604 133.544V175.581C172.604 176.502 173.352 177.25 174.273 177.25H335.715C336.637 177.25 337.384 176.502 337.384 175.581V133.544C337.384 132.622 336.637 131.875 335.715 131.875Z" fill="#00AC96"/>
                <path d="M198.875 170.958C198.875 170.037 199.621 169.289 200.544 169.289H263.276C264.197 169.289 264.945 170.035 264.945 170.958V177.25H198.875V170.958Z" fill="white"/>
                <path d="M308.309 148.594H278.099C277.868 148.594 277.681 148.781 277.681 149.011V152.952C277.681 153.182 277.868 153.369 278.099 153.369H308.309C308.54 153.369 308.727 153.182 308.727 152.952V149.011C308.727 148.781 308.540 148.594 308.309 148.594Z" fill="white"/>
                <path d="M181.36 143.021C182.679 143.021 183.748 141.952 183.748 140.633C183.748 139.314 182.679 138.244 181.36 138.244C180.041 138.244 178.971 139.314 178.971 140.633C178.971 141.952 180.041 143.021 181.36 143.021Z" fill="#F74930"/>
                <path d="M197.281 143.021C198.6 143.021 199.67 141.952 199.67 140.633C199.67 139.314 198.6 138.244 197.281 138.244C195.962 138.244 194.893 139.314 194.893 140.633C194.893 141.952 195.962 143.021 197.281 143.021Z" fill="#00A76F"/>
                <path d="M189.32 143.021C190.639 143.021 191.709 141.952 191.709 140.633C191.709 139.314 190.639 138.244 189.32 138.244C188.001 138.244 186.932 139.314 186.932 140.633C186.932 141.952 188.001 143.021 189.32 143.021Z" fill="#FFDF00"/>
                <path d="M318.28 157.348C321.797 157.348 324.648 154.496 324.648 150.979C324.648 147.462 321.797 144.611 318.28 144.611C314.763 144.611 311.912 147.462 311.912 150.979C311.912 154.496 314.763 157.348 318.28 157.348Z" fill="white"/>
                <path d="M335.715 186.814H174.273C173.352 186.814 172.604 187.562 172.604 188.483V230.52C172.604 231.442 173.352 232.189 174.273 232.189H335.715C336.637 232.189 337.384 231.442 337.384 230.52V188.483C337.384 187.562 336.637 186.814 335.715 186.814Z" fill="#292561"/>
                <path d="M198.875 225.897C198.875 224.975 199.621 224.229 200.544 224.229H263.276C264.197 224.229 264.945 224.975 264.945 225.897V232.189H198.875V225.897Z" fill="white"/>
                <path d="M308.309 203.529H278.099C277.868 203.529 277.681 203.716 277.681 203.947V207.887C277.681 208.118 277.868 208.305 278.099 208.305H308.309C308.54 208.305 308.727 208.118 308.727 207.887V203.947C308.727 203.716 308.540 203.529 308.309 203.529Z" fill="white"/>
                <path d="M181.36 197.957C182.679 197.957 183.748 196.888 183.748 195.568C183.748 194.249 182.679 193.18 181.36 193.18C180.041 193.18 178.971 194.249 178.971 195.568C178.971 196.888 180.041 197.957 181.36 197.957Z" fill="#F74930"/>
                <path d="M197.281 197.957C198.6 197.957 199.67 196.888 199.67 195.568C199.67 194.249 198.6 193.18 197.281 193.18C195.962 193.18 194.893 194.249 194.893 195.568C194.893 196.888 195.962 197.957 197.281 197.957Z" fill="#00A76F"/>
                <path d="M189.32 197.957C190.639 197.957 191.709 196.888 191.709 195.568C191.709 194.249 190.639 193.18 189.32 193.18C188.001 193.18 186.932 194.249 186.932 195.568C186.932 196.888 188.001 197.957 189.32 197.957Z" fill="#FFDF00"/>
                <path d="M318.28 212.287C321.797 212.287 324.648 209.436 324.648 205.919C324.648 202.402 321.797 199.551 318.28 199.551C314.763 199.551 311.912 202.402 311.912 205.919C311.912 209.436 314.763 212.287 318.28 212.287Z" fill="white"/>
                <path d="M335.715 241.752H174.273C173.352 241.752 172.604 242.499 172.604 243.421V285.458C172.604 286.379 173.352 287.127 174.273 287.127H335.715C336.637 287.127 337.384 286.379 337.384 285.458V243.421C337.384 242.499 336.637 241.752 335.715 241.752Z" fill="#00AC96"/>
                <path d="M198.875 280.833C198.875 279.912 199.621 279.164 200.544 279.164H263.276C264.197 279.164 264.945 279.91 264.945 280.833V287.125H198.875V280.833Z" fill="white"/>
                <path d="M308.309 258.469H278.099C277.868 258.469 277.681 258.656 277.681 258.886V262.827C277.681 263.057 277.868 263.244 278.099 263.244H308.309C308.540 263.244 308.727 263.057 308.727 262.827V258.886C308.727 258.656 308.540 258.469 308.309 258.469Z" fill="white"/>
                <path d="M181.36 252.896C182.679 252.896 183.748 251.827 183.748 250.508C183.748 249.189 182.679 248.119 181.36 248.119C180.041 248.119 178.971 249.189 178.971 250.508C178.971 251.827 180.041 252.896 181.36 252.896Z" fill="#F74930"/>
                <path d="M197.281 252.896C198.6 252.896 199.67 251.827 199.67 250.508C199.67 249.189 198.6 248.119 197.281 248.119C195.962 248.119 194.893 249.189 194.893 250.508C194.893 251.827 195.962 252.896 197.281 252.896Z" fill="#00A76F"/>
                <path d="M189.32 252.896C190.639 252.896 191.709 251.827 191.709 250.508C191.709 249.189 190.639 248.119 189.32 248.119C188.001 248.119 186.932 249.189 186.932 250.508C186.932 251.827 188.001 252.896 189.32 252.896Z" fill="#FFDF00"/>
                <path d="M318.28 267.225C321.797 267.225 324.648 264.373 324.648 260.856C324.648 257.339 321.797 254.488 318.28 254.488C314.763 254.488 311.912 257.339 311.912 260.856C311.912 264.373 314.763 267.225 318.28 267.225Z" fill="white"/>
                <path d="M113.553 158.428H78.2655C77.4204 158.428 76.7354 159.113 76.7354 159.958V195.245C76.7354 196.09 77.4204 196.775 78.2655 196.775H113.553C114.398 196.775 115.083 196.09 115.083 195.245V159.958C115.083 159.113 114.398 158.428 113.553 158.428Z" fill="#BFEDE7"/>
                <path opacity="0.1" fillRule="evenodd" clipRule="evenodd" d="M84.1895 158.428C86.4519 173.587 99.372 185.264 115.083 185.591V159.956C115.083 159.112 114.397 158.428 113.554 158.428H84.1895Z" fill="white"/>
                <path d="M98.0027 163.656H93.8191C87.273 163.656 81.9663 168.963 81.9663 175.509V179.693C81.9663 186.239 87.273 191.545 93.8191 191.545H98.0027C104.549 191.545 109.855 186.239 109.855 179.693V175.509C109.855 168.963 104.549 163.656 98.0027 163.656Z" fill="white"/>
                <path d="M100.266 174.988C98.822 174.988 97.6519 176.158 97.6519 177.603C97.6519 179.047 98.822 180.217 100.266 180.217C101.711 180.217 102.881 179.047 102.881 177.603C102.881 176.158 101.711 174.988 100.266 174.988Z" fill="#292561"/>
                <path d="M91.5521 174.988C90.1077 174.988 88.9375 176.158 88.9375 177.603C88.9375 179.047 90.1077 180.217 91.5521 180.217C92.9965 180.217 94.1666 179.047 94.1666 177.603C94.1666 176.158 92.9965 174.988 91.5521 174.988Z" fill="#292561"/>
              </svg>
            </div>
            
            {/* Error Title */}
            <h1 
              className={`text-center font-cairo font-bold mb-6 ${isLoaded ? 'animate-fade-in-up stagger-1' : 'opacity-0'}`}
              style={{
                color: '#292561',
                fontSize: 'clamp(28px, 5vw, 44px)',
                lineHeight: 'normal'
              }}
            >
              خطأ بالسيرفر
            </h1>
            
            {/* Error Description */}
            <p 
              className={`font-cairo max-w-2xl mx-auto px-4 mb-8 ${isLoaded ? 'animate-fade-in-up stagger-2' : 'opacity-0'}`}
              style={{
                color: '#6B7280',
                fontSize: 'clamp(16px, 2.5vw, 18px)',
                fontWeight: 400,
                lineHeight: '28px',
                textAlign: 'center'
              }}
            >
              حدث خطأ غير متوقع في خادمنا. يرجى التحقق من اتصالك بالإنترنت أو إعادة المحاولة لاحقًا.
            </p>

            {/* Action Buttons */}
            <div className={`flex flex-col sm:flex-row gap-4 justify-center items-center ${isLoaded ? 'animate-scale-in stagger-3' : 'opacity-0'}`}>
              <button
                onClick={reset}
                className="inline-flex items-center justify-center px-8 py-3 text-white font-semibold rounded-lg btn-animate font-cairo"
                style={{
                  backgroundColor: '#292561',
                  fontSize: '16px',
                  fontWeight: 600,
                  minWidth: '200px'
                }}
              >
                إعادة المحاولة
              </button>
              
              <Link
                href={`/${locale}`}
                className="inline-flex items-center justify-center px-8 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 btn-animate font-cairo"
                style={{
                  fontSize: '16px',
                  fontWeight: 600,
                  minWidth: '200px'
                }}
              >
                العودة للرئيسية
              </Link>
            </div>

            {/* Additional Help */}
            <div className={`mt-8 pt-8 border-t border-gray-200 ${isLoaded ? 'animate-fade-in-up stagger-4' : 'opacity-0'}`}>
              <p className="text-sm text-gray-500 font-cairo mb-4">
                إذا استمر هذا الخطأ، يمكنك:
              </p>
              <div className="flex flex-col sm:flex-row gap-4 justify-center items-center text-sm">
                <Link
                  href={`/${locale}/contact`}
                  className="text-teal-600 hover:text-teal-700 font-cairo font-medium"
                >
                  تواصل مع الدعم الفني
                </Link>
                <span className="hidden sm:inline text-gray-300">|</span>
                <a
                  href="mailto:support@ersaa.com"
                  className="text-teal-600 hover:text-teal-700 font-cairo font-medium"
                >
                  إرسال بريد إلكتروني
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}
